<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <title>Document</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.6.0/underscore.js"></script>
</head>
<body>

<h1>Напреден Веб Дизајн Вежби</h1>
<p>https://github.com/atanevski/JavaScript</p>
<h3>Задача 1.2</h3>

<div>
    <p id="p1"><strong>Paragraph no:1</strong></p>

    <div>Enter new email: <input type="text" id="txtEmail"></div>

    <div>
        <input type="button" id="btnChangeEmail" value="Change Email" onclick="changeEmailToUser2()">
        <input type="button" id="btnshowWinner" value="Show Winner" onclick="showWinnerFunction()">
    </div>

    <p id="showJohnnyNewEmail"></p>

    <p id="showWinnerText"></p>
</div>


<h3>Задача 2.1</h3>

<div>
    <pre>
firstArray = [];
function flatten(text) {
    for (var arg = 0; arg < arguments.length; arg++) {
        if (arguments[arg].constructor === Array) {
            for (var i = 0; i < arguments[arg].length; i++) {
                flatten(arguments[arg][i]);
            }
        } else {
            firstArray.push(arguments[arg]);
        }
    }
}
    </pre>
    <div>
        <pre>
            input1 = [1, [2], [3, [[4]]],[5,6]]
            input2 = [1, [2], [3, [[4]]],[5,6]], true
        </pre>
        <input type="button" id="btnFlatten" value="Run script" onclick="showFirstArray()">

        <p id="arrout"></p>
    </div>
</div>


<h3>Задача 2.2</h3>

<div>
    <pre>
        flatten([1, 2, 3, 4, 5], [1, [2], [3, [[4]]], [5, 6]]);
        uniqArray = _.uniq(firstArray);
        (underscore.js otherwise we compare one with all and we check if it exist...)
    </pre>
    <div>
        <input type="button" id="btnFlatten" value="Run script" onclick="showFirstArray1()">

        <p id="arrout1"></p>
    </div>
</div>


<h3>Задача 3.1</h3>

<div>
    <p id="demo">0</p>
    <input type="button" onclick="myFunction()" value="Click me!">
</div>

<h3>Задача 4</h3>

Scroll down :)


<h3>Задача 5.1</h3>

<div>
    <input type="button" value="Add File" onclick="doIT()">
    <input type="button" value="Remove Last File" onclick="delIT()">
</div>


<div id="app">
    <input type="file" id="cFile" value="Choose File">
</div>

<h3>Задача 5.2</h3>

<div id="he">

    <span id="spanGoogle">https://www.google.com</span>

    <div>
        <input type="button" id="btnn" value="Replace with anchor" onclick="khaBoom()">
    </div>

</div>


<h3>Задача 5.3</h3>


<div id="divi">
    <img id="imageE">
</div>
<button type="button" onclick="imgg()" value="Show Image">Show image</button>


<script type="text/javascript">
    //pettri
    var counter = 0;

    function imgg() {
        var myImage1 = new Image(240, 160);
        var myImage2 = new Image(240, 160);
        var myImage3 = new Image(240, 160);
        myImage1.src = 'http://farm4.staticflickr.com/3691/11268502654_f28f05966c_m.jpg';
        myImage2.src = 'http://farm1.staticflickr.com/33/45336904_1aef569b30_n.jpg';
        myImage3.src = 'http://farm6.staticflickr.com/5211/5384592886_80a512e2c9.jpg%22';

        var zapad = document.getElementById("divi");

        if (counter % 3 == 2) {
            zapad.replaceChild(myImage1, zapad.children[0]);
            counter++;
        } else if (counter % 3 == 0) {
            zapad.replaceChild(myImage2, zapad.children[0]);
            counter++;
        } else if (counter % 3 == 1) {
            zapad.replaceChild(myImage3, zapad.children[0]);
            counter++;
        }

        console.log(counter);

    }
    //petdva

    function khaBoom() {
        var span = document.getElementById("spanGoogle");

        var a = document.createElement('a');
        var uri = document.createTextNode("https://www.google.com");
        a.appendChild(uri);
        a.href = "https://www.google.com";

        document.getElementById("he").replaceChild(a, span);
    }

    //petta
    function doIT() {
        var btn = document.createElement("input");
        btn.type = "file";
        var t = document.createTextNode("Choose File");
        btn.appendChild(t);
        document.getElementById("app").appendChild(btn);

    }

    function delIT() {
        var tanes = document.getElementById("app");
        tanes.removeChild(tanes.children[tanes.children.length - 1]);
    }

    //treta
    function add() {
        var counter = 0;
        return function () {
            return counter += 2;
        };
    }
    var temp = add();

    function myFunction() {
        document.getElementById("demo").innerHTML = temp();
    }


    //vtora
    firstArray = [];
    var t = function flatten(text) {
        for (var arg = 0; arg < arguments.length; arg++) {
            if (arguments[arg].constructor === Array) {
                for (var i = 0; i < arguments[arg].length; i++) {
                    flatten(arguments[arg][i]);
                }
            } else {
                firstArray.push(arguments[arg]);
            }
        }
    }

    function showFirstArray() {
        document.getElementById("arrout").innerHTML = "";
        t([1, [2], [3, [[4]]], [5, 6]]);
        document.getElementById("arrout").innerHTML += firstArray + "<br>";
        firstArray = [];
        t([1, [2], [3, [[4]]], [5, 6]], true);
        document.getElementById("arrout").innerHTML += "<br>" + firstArray;
        firstArray = [];


    }

    function showFirstArray1() {
        firstArray = [];
        t([1, 2, 3, 4, 5], [1, [2], [3, [[4]]], [5, 6]]);
        uniqArray = _.uniq(firstArray);
        document.getElementById("arrout1").innerHTML = "<br>" + uniqArray;
        firstArray = [];
    }


    //prva
    function User(name, email) {
        this.QuizScore = [];
        this.CurrentScore = 0;
        this.name = name;
        this.email = email;
    }

    User.prototype.saveScore = function (theScoreToAdd) {
        this.CurrentScore += theScoreToAdd;
        this.QuizScore.push(theScoreToAdd);
    }

    User.prototype.showNameAndScores = function () {
        s = "";
        s = this.name + " Scores: ";

        if (this.QuizScore.length != 0) {
            for (i = 0; i < this.QuizScore.length; i++) {
                if (i == this.QuizScore.length - 1) {
                    s += this.QuizScore[i];
                } else {
                    s += this.QuizScore[i] + ", ";
                }

            }
        } else {
            s += "No scores yet";
        }

        return s;
    }

    User.prototype.changeEmail = function (newEmail) {
        this.email = newEmail;
    }

    User.prototype.constructor = User;


    var user1 = new User("Michael", "michael6@gmail.com");
    var user2 = new User("Johnny", "johnny@gmail.com");
    var user3 = new User("Elvis", "TheKing@gmail.com");

    user1.saveScore(15);
    user1.saveScore(20);

    user2.saveScore(10);
    user2.saveScore(15);
    user2.saveScore(3);

    print = user1.showNameAndScores() + "<br>" + user2.showNameAndScores() + "<br>" + user3.showNameAndScores();
    document.getElementById("p1").innerHTML = print;

    function changeEmailToUser2() {
        user2.changeEmail(document.getElementById("txtEmail").value);
        document.getElementById("showJohnnyNewEmail").innerHTML = "Johnny's new email address is " + user2.email;
    }

    function showWinnerFunction() {
        var winnerIndex = -1000;
        var winnerScore = -1000;
        var users = [user1, user2, user3];
        for (i = 0; i < users.length; i++) {
            console.log(users[i].name);
            if (users[i].CurrentScore > winnerScore) {
                winnerScore = users[i].CurrentScore;
                winnerIndex = i;
            }
        }
        document.getElementById("showWinnerText").innerHTML = "The winner is " + users[winnerIndex].name + " with a total score of " + users[winnerIndex].CurrentScore;
    }

</script>

</body>
</html>